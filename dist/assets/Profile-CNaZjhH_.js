import{c as g,u as F,r as d,j as e,B as _,S as z,L as I,X as A,U as j,q as U,t as h,v as E}from"./index-6OEzUVLJ.js";import{S as M,U as B}from"./upload-CL1mV3wf.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],R=g("camera",q);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],H=g("crown",W);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],O=g("mail",V);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],G=g("phone",X);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],K=g("shield",J),y=({label:a,name:r,value:u,onChange:i,type:m="text",icon:n,placeholder:o,disabled:c=!1})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:a}),e.jsxs("div",{className:"relative",children:[n&&e.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:m,name:r,value:u,onChange:i,placeholder:o,disabled:c,className:`w-full ${n?"pl-10":"pl-4"} pr-4 py-3 border-2 rounded-xl transition-all duration-200 focus:outline-none focus:ring-0 ${c?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-200 focus:border-blue-500 hover:border-gray-300"}`})]})]}),Q=({src:a,alt:r,onImageChange:u,isEditing:i,isLoading:m})=>{const n=d.useRef(null),o=()=>{i&&n.current?.click()};return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`relative w-32 h-32 rounded-full overflow-hidden ring-4 ring-white shadow-lg ${i?"cursor-pointer":""}`,onClick:o,children:[a?e.jsx("img",{src:a,alt:r,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:r?.[0]||"U"})}),i&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:m?e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):e.jsx(R,{className:"text-white",size:24})})]}),i&&e.jsx("button",{onClick:o,className:"absolute -bottom-2 -right-2 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-lg transition-all duration-200",children:e.jsx(B,{size:16})}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:u,className:"hidden"})]})},ee=()=>{const{user:a,profile:r,refreshProfile:u}=F(),[i,m]=d.useState(!1),[n,o]=d.useState(!1),[c,N]=d.useState(!1),[t,b]=d.useState({first_name:"",last_name:"",phone_number:"",profile_picture:null}),[S,x]=d.useState(""),[k,P]=d.useState({});d.useEffect(()=>{if(a){const s={first_name:a.firstName||"",last_name:a.lastName||"",phone_number:a.phoneNumber||"",profile_picture:null};if(b(s),P(s),a.profilePicture){const l=a.profilePicture.startsWith("http")?a.profilePicture:`https://api.alamocitypulse.com/${a.profilePicture}`;x(l)}else x("")}},[a]);const v=s=>{const{name:l,value:p}=s.target;b(f=>({...f,[l]:p}))},D=s=>{const l=s.target.files[0];if(l){if(!l.type.startsWith("image/")){h.error("Please select a valid image file"),s.target.value="";return}if(l.size>5*1024*1024){h.error("Image size should be less than 5MB"),s.target.value="";return}o(!0),b(f=>({...f,profile_picture:l}));const p=new FileReader;p.onload=f=>{x(f.target.result),o(!1)},p.onerror=()=>{o(!1),h.error("Failed to read image file")},p.readAsDataURL(l)}},L=async()=>{try{m(!0);const s=new FormData;t.first_name?.trim()&&s.append("first_name",t.first_name.trim()),t.last_name?.trim()&&s.append("last_name",t.last_name.trim()),t.phone_number?.trim()&&s.append("phone_number",t.phone_number.trim()),t.profile_picture&&t.profile_picture instanceof File&&s.append("profile_picture",t.profile_picture);const l=await E(s);await u(),P({first_name:t.first_name,last_name:t.last_name,phone_number:t.phone_number,profile_picture:null}),N(!1),h.success("Profile updated successfully!",{icon:"âœ…",duration:3e3})}catch(s){console.error("Profile update error:",s),h.error(s.message||"Failed to update profile")}finally{m(!1)}},$=()=>{if(b(k),a?.profilePicture){const s=a.profilePicture.startsWith("http")?a.profilePicture:`https://api.alamocitypulse.com/${a.profilePicture}`;x(s)}else x("");N(!1)},C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified",w=r?r.status==="premium"?{text:"Premium",color:"bg-yellow-400 text-yellow-900",icon:H}:{text:"Free",color:"bg-gray-200 text-gray-700",icon:j}:{text:"Free",color:"bg-gray-200 text-gray-700",icon:j};return w.icon,a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your personal information and preferences"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsx(Q,{src:S,alt:`${t.first_name} ${t.last_name}`,onImageChange:D,isEditing:c,isLoading:n}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:[t.first_name," ",t.last_name]}),e.jsx("p",{className:"text-blue-100 mb-2",children:a.email}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-start",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w.color}`,children:w.text==="Premium"?"ðŸ‘‘ Premium":"ðŸ‘¤ Free"}),e.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white rounded-full text-sm font-medium",children:a.role||"User"})]})]}),e.jsx("div",{className:"flex gap-2",children:c?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{onClick:L,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium",children:[i?e.jsx(I,{className:"h-4 w-4 animate-spin"}):e.jsx(M,{size:18}),"Save"]}),e.jsxs(_,{onClick:$,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:[e.jsx(A,{size:18}),"Cancel"]})]}):e.jsxs(_,{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2  text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-medium",children:[e.jsx(z,{size:18}),"Edit Profile"]})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{label:"First Name",name:"first_name",value:t.first_name,onChange:v,icon:j,placeholder:"Enter your first name",disabled:!c}),e.jsx(y,{label:"Last Name",name:"last_name",value:t.last_name,onChange:v,icon:j,placeholder:"Enter your last name",disabled:!c}),e.jsx(y,{label:"Email Address",name:"email",value:a.email,onChange:()=>{},type:"email",icon:O,placeholder:"Enter your email",disabled:!0}),e.jsx(y,{label:"Phone Number",name:"phone_number",value:t.phone_number,onChange:v,type:"tel",icon:G,placeholder:"Enter your phone number",disabled:!c})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"text-blue-600",size:20}),"Account Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Member since:"}),e.jsx("span",{className:"font-medium",children:C(a.joinedDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account ID:"}),e.jsxs("span",{className:"font-medium",children:["#",a.id||"N/A"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`font-medium ${r?.isActive?"text-green-500":"text-red-500"}`,children:r?.isActive?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"text-green-600",size:20}),"Subscription Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Plan:"}),e.jsx("span",{className:"font-medium",children:r?.plan||"Free Plan"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`font-medium ${r?.status==="premium"?"text-green-500":"text-gray-500"}`,children:r?.status||"Free"})]}),r?.endDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expires:"}),e.jsx("span",{className:"font-medium",children:C(r.endDate)})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})};export{ee as default};
